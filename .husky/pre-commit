# Pre-commit hook for Goblin
# Runs quality checks before allowing commits

echo "ğŸ” Running pre-commit quality checks..."

# TypeScript type check
echo "ğŸ“‹ TypeScript type checking..."
bun run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript type check failed"
  exit 1
fi

# Biome lint check
echo "ğŸ” Biome linting..."
bun run lint
if [ $? -ne 0 ]; then
  echo "âŒ Lint check failed. Run 'bun run lint:fix' to auto-fix issues."
  exit 1
fi

# Unit tests
echo "ğŸ§ª Running unit tests..."
bun test tests/unit/
if [ $? -ne 0 ]; then
  echo "âŒ Unit tests failed"
  exit 1
fi

# Agent compliance check
echo "ğŸ¤– Running agent compliance checks..."
./tools/agents-guard/check.sh
if [ $? -ne 0 ]; then
  echo "âŒ Agent compliance check failed"
  exit 1
fi

echo "âœ… All quality checks passed!"
