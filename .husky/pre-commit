#!/bin/sh
# Goblin Pre-commit Hook - Quality Gate
# Prevents bad code from being committed

echo "üîç Running quality checks..."

# TypeScript check - fail on any errors
if ! bun run typecheck 2>&1; then
  echo "‚ùå TypeScript errors found!"
  exit 1
fi

# Biome check on source files only (test files can use 'any' types for mocking)
# Only check src directory to avoid test file errors
BIOME_OUTPUT=$(bun run biome check src/ 2>&1)
if echo "$BIOME_OUTPUT" | grep -E "Found [0-9]+ errors"; then
  echo "‚ùå Lint errors found in source files!"
  exit 1
fi

echo "‚úÖ Quality checks passed!"
