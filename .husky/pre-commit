#!/usr/bin/env sh
# Husky pre-commit hook
# Runs lint-staged which executes Biome on staged files

# Exit on any error
set -e

# Debug: show what $0 is
echo "ğŸ“ Script path (\$0): $0"
echo "ğŸ“‚ dirname of \$0: $(dirname "$0")"

# Get the directory of this script
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
echo "ğŸ“ SCRIPT_DIR: $SCRIPT_DIR"

# Change to the repository root
cd "$SCRIPT_DIR/../.."

# Debug: show current directory and git status
echo "ğŸ“ Current directory after cd: $(pwd)"
echo "ğŸ” Git directory: $(git rev-parse --git-dir 2>&1 || echo 'FAILED')"

# Run lint-staged to check only staged files
echo "ğŸ” Running pre-commit checks on staged files..."
npx lint-staged

echo "âœ… Pre-commit checks passed!"
