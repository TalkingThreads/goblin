{
  "$schema": "./config.schema.json",
  "servers": [
    {
      "name": "filesystem",
      "description": "Local filesystem access",
      "transport": "stdio",
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/allow"],
      "mode": "stateful",
      "enabled": true,
      "policies": {
        "outputSizeLimit": 131072,
        "defaultTimeout": 15000,
        "rateLimit": {
          "requestsPerMinute": 120,
          "burstSize": 20
        }
      },
      "auth": {
        "mode": "apikey",
        "apiKey": "server-filesystem-key"
      },
      "aliases": {
        "read": "read_file",
        "write": "write_file",
        "ls": "list_directory"
      },
      "normalizePaths": true
    },
    {
      "name": "example-http",
      "description": "Example HTTP MCP server",
      "transport": "http",
      "url": "https://api.example.com/mcp",
      "mode": "smart",
      "enabled": true,
      "headers": {
        "Authorization": "Bearer {{OAUTH_TOKEN}}"
      },
      "policies": {
        "outputSizeLimit": 65536,
        "defaultTimeout": 30000,
        "maxConnections": 50
      }
    }
  ],
  "gateway": {
    "port": 3443,
    "host": "0.0.0.0",
    "tls": {
      "enabled": true,
      "certPath": "/etc/ssl/certs/goblin.crt",
      "keyPath": "/etc/ssl/private/goblin.key"
    }
  },
  "auth": {
    "mode": "apikey",
    "apiKey": "gateway-master-key",
    "users": [
      {
        "username": "admin",
        "apiKey": "admin-key-123",
        "roles": ["admin", "developer"]
      },
      {
        "username": "developer",
        "apiKey": "dev-key-456",
        "roles": ["developer"]
      }
    ]
  },
  "policies": {
    "outputSizeLimit": 65536,
    "defaultTimeout": 30000,
    "normalizePaths": true,
    "maxConnections": 1000,
    "rateLimit": {
      "requestsPerMinute": 600,
      "burstSize": 100
    }
  },
  "logging": {
    "level": "info",
    "format": "json",
    "destinations": "both",
    "file": {
      "path": "/var/log/goblin/app.log",
      "maxSize": "100M",
      "maxFiles": 7
    },
    "redact": {
      "enabled": true,
      "paths": ["password", "token", "apiKey", "accessToken", "refreshToken", "authorization", "cookie"],
      "remove": false
    },
    "sampling": {
      "enabled": true,
      "rate": 0.1
    },
    "requestLogging": {
      "enabled": true,
      "includeBody": false,
      "includeResponseBody": false,
      "excludePaths": ["/health", "/metrics", "/status"]
    }
  },
  "virtualTools": [
    {
      "id": "audit_log",
      "description": "Audit logging tool",
      "ops": [
        {
          "tool": "filesystem_write_file",
          "args": {
            "path": "/var/log/goblin/audit.log",
            "content": "{{TIMESTAMP}} - {{USERNAME}} - {{ACTION}} - {{DETAILS}}"
          }
        }
      ],
      "timeoutMs": 5000,
      "stopOnError": true
    },
    {
      "id": "security_scan",
      "description": "Security scan tool",
      "ops": [
        {
          "tool": "http_get",
          "args": {
            "url": "https://security-api.example.com/scan"
          }
        },
        {
          "tool": "filesystem_write_file",
          "args": {
            "path": "/var/log/goblin/security-scan-{{TIMESTAMP}}.log",
            "content": "{{SCAN_RESULT}}"
          }
        }
      ],
      "timeoutMs": 30000,
      "stopOnError": false
    }
  ]
}
